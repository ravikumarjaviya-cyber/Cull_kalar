<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Black Master - Coin Collector</title>
    <style>
        body { margin: 0; background: #222; overflow: hidden; font-family: 'Arial', sans-serif; }
        canvas { display: block; background: #333; margin: 0 auto; border: 4px solid #000; }
        #ui { position: absolute; top: 10px; left: 50%; transform: translateX(-50%); color: white; text-align: center; pointer-events: none; }
        .stat { font-size: 20px; font-weight: bold; margin: 5px; text-shadow: 2px 2px #000; }
    </style>
</head>
<body>

    <div id="ui">
        <div class="stat">सिक्के (Coins): <span id="coinCount">0</span></div>
        <div class="stat">स्कोर: <span id="score">0</span></div>
    </div>
    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");

        canvas.width = window.innerWidth > 500 ? 400 : window.innerWidth;
        canvas.height = 600;

        let coins = 0;
        let score = 0;
        let gameActive = true;

        const player = {
            x: 50, y: canvas.height - 60,
            width: 40, height: 40,
            color: "#000", // Black Master
            dy: 0, jumpForce: 13, gravity: 0.7, grounded: false
        };

        const objects = []; // सिक्के और बाधाएं

        function spawnObject() {
            const type = Math.random() > 0.3 ? 'coin' : 'enemy';
            const size = type === 'coin' ? 20 : 35;
            objects.push({
                x: canvas.width,
                y: type === 'coin' ? canvas.height - 100 - Math.random() * 150 : canvas.height - size,
                width: size, height: size,
                type: type,
                speed: 5 + (score / 10) // स्कोर के साथ स्पीड बढ़ेगी
            });
        }

        function update() {
            if (!gameActive) return;

            // प्लेयर की मूवमेंट
            player.dy += player.gravity;
            player.y += player.dy;

            if (player.y + player.height > canvas.height) {
                player.y = canvas.height - player.height;
                player.dy = 0;
                player.grounded = true;
            }

            // ऑब्जेक्ट्स (सिक्के और दुश्मन) को हैंडल करना
            objects.forEach((obj, i) => {
                obj.x -= obj.speed;

                // कोलिजन (Collision) चेक
                if (player.x < obj.x + obj.width && player.x + player.width > obj.x &&
                    player.y < obj.y + obj.height && player.y + player.height > obj.y) {
                    
                    if (obj.type === 'coin') {
                        coins += 10;
                        score += 5;
                        document.getElementById("coinCount").innerText = coins;
                        document.getElementById("score").innerText = score;
                        objects.splice(i, 1);
                    } else {
                        gameActive = false;
                        alert("गेम ओवर! टोटल सिक्के: " + coins);
                        location.reload();
                    }
                }

                if (obj.x + obj.width < 0) {
                    objects.splice(i, 1);
                    if (obj.type === 'enemy') score++; 
                    document.getElementById("score").innerText = score;
                }
            });

            if (Math.random() < 0.02) spawnObject();
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // प्लेयर (Black Master)
            ctx.fillStyle = player.color;
            ctx.shadowBlur = 10; ctx.shadowColor = "black";
            ctx.fillRect(player.x, player.y, player.width, player.height);
            ctx.shadowBlur = 0;

            // ऑब्जेक्ट्स
            objects.forEach(obj => {
                if (obj.type === 'coin') {
                    ctx.fillStyle = "#FFD700"; // Gold
                    ctx.beginPath();
                    ctx.arc(obj.x + 10, obj.y + 10, 10, 0, Math.PI * 2);
                    ctx.fill();
                } else {
                    ctx.fillStyle = "#FF3333"; // Red Enemy
                    ctx.fillRect(obj.x, obj.y, obj.width, obj.height);
                }
            });
        }

        function loop() {
            update();
            draw();
            requestAnimationFrame(loop);
        }

        // कंट्रोल
        const jumpAction = () => {
            if (player.grounded) {
                player.dy = -player.jumpForce;
                player.grounded = false;
            }
        };

        window.addEventListener("keydown", (e) => { if (e.code === "Space") jumpAction(); });
        window.addEventListener("touchstart", jumpAction);

        loop();
    </script>
</body>
</html>
