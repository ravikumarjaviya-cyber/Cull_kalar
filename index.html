<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Block Blast - Music & Effects Edition</title>
    <style>
        body { background-color: #0f172a; color: white; font-family: 'Segoe UI', sans-serif; display: flex; flex-direction: column; align-items: center; margin: 0; touch-action: none; overflow: hidden; }
        .header { margin: 15px; text-align: center; }
        .stats { display: flex; gap: 30px; font-size: 20px; color: #00f2fe; text-shadow: 0 0 10px rgba(0,242,254,0.5); }
        .grid { display: grid; grid-template-columns: repeat(8, 42px); grid-template-rows: repeat(8, 42px); gap: 5px; background: #1e293b; padding: 12px; border-radius: 12px; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
        .cell { width: 42px; height: 42px; background: #334155; border-radius: 6px; transition: all 0.2s; cursor: pointer; }
        .cell.filled { background: linear-gradient(135deg, #a855f7, #7e22ce); box-shadow: inset 0 0 8px rgba(255,255,255,0.3); }

        /* ‡§ß‡§Æ‡§æ‡§ï‡§æ ‡§è‡§®‡•Ä‡§Æ‡•á‡§∂‡§® */
        @keyframes blastEffect {
            0% { transform: scale(1); filter: brightness(3); opacity: 1; }
            100% { transform: scale(0); opacity: 0; }
        }
        .blasting { animation: blastEffect 0.5s ease-out forwards; }

        .shapes-area { margin-top: 25px; display: flex; flex-direction: column; align-items: center; gap: 10px; }
        .blast-btn { padding: 12px 30px; background: linear-gradient(to right, #f43f5e, #fb7185); border: none; color: white; border-radius: 50px; font-weight: bold; cursor: pointer; box-shadow: 0 4px 15px rgba(244,63,94,0.4); }
        .music-btn { background: none; border: 1px solid #00f2fe; color: #00f2fe; padding: 5px 10px; border-radius: 5px; cursor: pointer; font-size: 12px; margin-top: 10px; }
        
        #restart-btn { margin-top: 15px; padding: 10px 25px; background: #10b981; border: none; color: white; border-radius: 8px; font-weight: bold; cursor: pointer; display: none; }
    </style>
</head>
<body>

    <div class="header">
        <h1>BLOCK BLAST PRO</h1>
        <div class="stats">
            <div>SCORE: <span id="score">0</span></div>
            <div>BEST: <span id="high-score">0</span></div>
        </div>
    </div>

    <div class="grid" id="grid"></div>

    <div class="shapes-area">
        <button class="blast-btn" onclick="triggerBlastEffect()">üí• BLAST NOW!</button>
        <button class="music-btn" onclick="toggleMusic()">üéµ Music On/Off</button>
    </div>

    <button id="restart-btn" onclick="resetGame()">RESTART</button>

    <audio id="bgMusic" loop>
        <source src="https://www.soundjay.com/free-music/sounds/ambient-dream-01.mp3" type="audio/mpeg">
    </audio>
    <audio id="blastSound">
        <source src="https://www.soundjay.com/buttons/sounds/button-10.mp3" type="audio/mpeg">
    </audio>

    <script>
        const gridBox = document.getElementById('grid');
        const scoreBox = document.getElementById('score');
        const highscoreBox = document.getElementById('high-score');
        const restartBtn = document.getElementById('restart-btn');
        const bgMusic = document.getElementById('bgMusic');
        const blastSound = document.getElementById('blastSound');

        let score = 0;
        let highScore = localStorage.getItem('blockBlastBest') || 0;
        let musicPlaying = false;
        highscoreBox.innerText = highScore;

        // ‡§∏‡§Ç‡§ó‡•Ä‡§§ ‡§ö‡§æ‡§≤‡•Ç ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è
        function toggleMusic() {
            if (!musicPlaying) {
                bgMusic.volume = 0.3; // ‡§Ü‡§µ‡§æ‡•õ ‡§π‡§≤‡•ç‡§ï‡•Ä ‡§∞‡§ñ‡•á‡§Ç
                bgMusic.play();
                musicPlaying = true;
            } else {
                bgMusic.pause();
                musicPlaying = false;
            }
        }

        function createGrid() {
            gridBox.innerHTML = '';
            for (let i = 0; i < 64; i++) {
                const cell = document.createElement('div');
                cell.classList.add('cell');
                cell.onclick = () => {
                    if (!cell.classList.contains('filled')) {
                        cell.classList.add('filled');
                        addScore(10);
                        if (!musicPlaying) toggleMusic(); // ‡§™‡§π‡§≤‡•á ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§™‡§∞ ‡§Æ‡•ç‡§Ø‡•Ç‡§ú‡§ø‡§ï ‡§∂‡•Å‡§∞‡•Ç
                    }
                };
                gridBox.appendChild(cell);
            }
        }

        function triggerBlastEffect() {
            const filledCells = document.querySelectorAll('.cell.filled');
            if (filledCells.length === 0) return;

            blastSound.currentTime = 0;
            blastSound.play();

            filledCells.forEach((cell, index) => {
                setTimeout(() => {
                    cell.classList.add('blasting');
                    setTimeout(() => {
                        cell.classList.remove('filled', 'blasting');
                    }, 500);
                }, index * 30);
            });
            addScore(filledCells.length * 5);
        }

        function addScore(pts) {
            score += pts;
            scoreBox.innerText = score;
            if (score > highScore) {
                highScore = score;
                localStorage.setItem('blockBlastBest', highScore);
                highscoreBox.innerText = highScore;
            }
            if(score > 100) restartBtn.style.display = 'block';
        }

        function resetGame() {
            score = 0;
            scoreBox.innerText = "0";
            createGrid();
            restartBtn.style.display = 'none';
        }

        createGrid();
    </script>
</body>
</html>
