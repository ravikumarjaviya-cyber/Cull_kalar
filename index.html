<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Block Blast Clone - Pro</title>
    <style>
        :root {
            --bg-color: #1a2a3a;
            --grid-bg: #2c3e50;
            --cell-empty: #34495e;
            --accent: #f1c40f;
        }

        body {
            background-color: var(--bg-color);
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            touch-action: none; /* मोबाइल के लिए ज़रूरी */
        }

        .header { margin: 20px; text-align: center; }
        .score-board { font-size: 24px; margin-bottom: 10px; color: var(--accent); }

        /* ग्रिड स्टाइल */
        .grid {
            display: grid;
            grid-template-columns: repeat(8, 40px);
            grid-template-rows: repeat(8, 40px);
            gap: 4px;
            background: var(--grid-bg);
            padding: 8px;
            border-radius: 8px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.3);
        }

        .cell {
            width: 40px;
            height: 40px;
            background: var(--cell-empty);
            border-radius: 4px;
            transition: background 0.2s;
        }

        .cell.filled { background: #3498db; box-shadow: inset 0 0 10px rgba(0,0,0,0.2); }

        /* शेप्स कंटेनर */
        .shapes-container {
            margin-top: 30px;
            display: flex;
            gap: 20px;
            height: 120px;
            align-items: center;
        }

        .shape {
            display: grid;
            gap: 2px;
            cursor: grab;
            transition: transform 0.2s;
        }

        .shape:active { cursor: grabbing; transform: scale(1.1); }

        .shape-cell {
            width: 30px;
            height: 30px;
            background: #e74c3c;
            border-radius: 4px;
        }
    </style>
</head>
<body>

    <div class="header">
        <h1>Block Blast Clone</h1>
        <div class="score-board">Score: <span id="score">0</span></div>
    </div>

    <div class="grid" id="grid"></div>

    <div class="shapes-container" id="shapes-container">
        </div>

    <script>
        const gridElement = document.getElementById('grid');
        const scoreElement = document.getElementById('score');
        const shapesContainer = document.getElementById('shapes-container');
        let score = 0;
        let gridArray = Array(8).fill().map(() => Array(8).fill(0));

        // 1. ग्रिड बनाना
        function createGrid() {
            gridElement.innerHTML = '';
            for (let r = 0; r < 8; r++) {
                for (let c = 0; c < 8; c++) {
                    const cell = document.createElement('div');
                    cell.classList.add('cell');
                    cell.dataset.row = r;
                    cell.dataset.col = c;
                    gridElement.appendChild(cell);
                }
            }
        }

        // 2. शेप्स का डेटा
        const shapeTemplates = [
            [[1, 1], [1, 1]], // Square
            [[1, 1, 1]],       // Horizontal Line
            [[1], [1], [1]],    // Vertical Line
            [[1, 0], [1, 1]]    // L-Small
        ];

        // 3. नए शेप्स जनरेट करना
        function spawnShapes() {
            shapesContainer.innerHTML = '';
            for (let i = 0; i < 3; i++) {
                const randomTemplate = shapeTemplates[Math.floor(Math.random() * shapeTemplates.length)];
                const shapeDiv = document.createElement('div');
                shapeDiv.classList.add('shape');
                shapeDiv.draggable = true;
                shapeDiv.style.gridTemplateColumns = `repeat(${randomTemplate[0].length}, 30px)`;

                randomTemplate.forEach(row => {
                    row.forEach(cell => {
                        const cellDiv = document.createElement('div');
                        if (cell) cellDiv.classList.add('shape-cell');
                        else cellDiv.style.visibility = 'hidden';
                        shapeDiv.appendChild(cellDiv);
                    });
                });

                shapeDiv.addEventListener('dragstart', () => shapeDiv.classList.add('dragging'));
                shapeDiv.addEventListener('dragend', (e) => handleDrop(e, randomTemplate, shapeDiv));
                shapesContainer.appendChild(shapeDiv);
            }
        }

        // 4. ड्रॉप और लाइन क्लियरिंग लॉजिक
        function handleDrop(e, template, element) {
            const dropTarget = document.elementFromPoint(e.clientX, e.clientY);
            if (!dropTarget || !dropTarget.classList.contains('cell')) return;

            const r = parseInt(dropTarget.dataset.row);
            const c = parseInt(dropTarget.dataset.col);

            // चेक करें कि क्या यहाँ फिट आ रहा है (Simplified check)
            let canPlace = true;
            template.forEach((row, ri) => {
                row.forEach((val, ci) => {
                    if (val && (gridArray[r + ri] === undefined || gridArray[r + ri][c + ci] !== 0)) {
                        canPlace = false;
                    }
                });
            });

            if (canPlace) {
                template.forEach((row, ri) => {
                    row.forEach((val, ci) => {
                        if (val) {
                            gridArray[r + ri][c + ci] = 1;
                            const targetCell = document.querySelector(`[data-row="${r + ri}"][data-col="${c + ci}"]`);
                            targetCell.classList.add('filled');
                        }
                    });
                });
                element.remove();
                score += 10;
                checkLines();
                if (shapesContainer.children.length === 0) spawnShapes();
            }
            scoreElement.innerText = score;
        }

        function checkLines() {
            // लाइन ब्लास्ट लॉजिक (हॉरिजॉन्टल)
            for (let r = 0; r < 8; r++) {
                if (gridArray[r].every(v => v === 1)) {
                    gridArray[r] = Array(8).fill(0);
                    score += 100;
                    renderGridState();
                }
            }
        }

        function renderGridState() {
            const cells = document.querySelectorAll('.cell');
            cells.forEach(cell => {
                const r = cell.dataset.row;
                const c = cell.dataset.col;
                if (gridArray[r][c] === 0) cell.classList.remove('filled');
            });
        }

        createGrid();
        spawnShapes();
    </script>
</body>
</html>
